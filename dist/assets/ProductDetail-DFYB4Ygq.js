import{_ as w,c as u,a as o,f as I,t as e,w as W,e as b,m as B,n as S,F,r as P,g as N,u as z,x as E,i as g,j as v,o as L,k as V,B as R,l as m}from"./index-Jd6TsP0i.js";import{T as U}from"./TriState-2fK6zj0G.js";const j={name:"ProductDetail",components:{TriState:U},props:{id:{type:String,required:!0}},setup(s){const c=V(),d=z(),{t}=E(),_=g(!0),h=g(""),r=g(!1),l=g(null),n=v(()=>d.isWatched(s.id)),p=v(()=>d.isInCompare(s.id)),a=v(()=>`https://via.placeholder.com/300x300?text=${encodeURIComponent(t("common.product"))}`),f=i=>({low:t("productDetail.competition.low"),medium:t("productDetail.competition.medium"),high:t("productDetail.competition.high")})[i]||i,y=()=>{d.toggleWatch(s.id)},D=()=>{p.value||d.addToCompare(s.id)},k=()=>{c.go(-1)},T=i=>{navigator.clipboard.writeText(i).then(()=>{r.value=!0,setTimeout(()=>{r.value=!1},2e3)}).catch(C=>{console.error("å¤åˆ¶å¤±è´¥:",C)})};return L(async()=>{try{_.value=!0,h.value="",d.isInitialized||await d.initialize();try{l.value=await d.getProduct(s.id)}catch(i){h.value=(i==null?void 0:i.message)||"Failed to load product",l.value=null,console.error("[ProductDetail] Failed to load product:",i)}}finally{_.value=!1}}),{product:l,loading:_,detailError:h,isWatched:n,isInCompare:p,showCopyNotification:r,placeholderImage:a,getCompetitionText:f,toggleWatch:y,addToCompare:D,goBack:k,copyToClipboard:T,t}}},q={class:"product-detail"},x={class:"page-header"},M={class:"page-title"},A={key:0,class:"product-content"},G={class:"product-header"},H={class:"product-image"},J=["src","alt"],K={class:"product-info"},O={class:"product-title"},Q={class:"product-meta"},X={class:"product-platform"},Y={class:"product-category"},Z={class:"product-stats"},$={class:"stat-item"},tt={class:"stat-label"},ot={class:"stat-value price"},st={class:"stat-item"},et={class:"stat-label"},at={class:"stat-value"},it={class:"stat-item"},ct={class:"stat-label"},dt={class:"stat-value"},nt={class:"stat-item"},rt={class:"stat-label"},lt={class:"product-actions"},pt=["disabled"],ut={class:"product-details"},mt={class:"detail-section"},_t={class:"detail-title"},ht={class:"detail-content"},gt={class:"detail-section"},vt={class:"detail-title"},ft={class:"keywords"},Ct={class:"keyword-text"},bt=["onClick"],yt={key:0,class:"copy-notification"};function Dt(s,c,d,t,_,h){const r=N("TriState"),l=R("img-fallback");return m(),u("div",q,[o("div",x,[o("button",{class:"btn btn-ghost back-btn",onClick:c[0]||(c[0]=(...n)=>t.goBack&&t.goBack(...n))},e(s.$t("productDetail.goBack")),1),o("h1",M," ğŸ“¦ "+e(s.$t("productDetail.title")),1)]),I(r,{loading:t.loading,error:t.detailError,empty:t.product?0:1,"empty-text":s.$t("productDetail.notFound")},{default:W(()=>{var n,p;return[t.product?(m(),u("div",A,[o("div",G,[o("div",H,[B(o("img",{src:((n=t.product)==null?void 0:n.imageUrl)||t.placeholderImage,alt:((p=t.product)==null?void 0:p.title)||t.t("common.product")},null,8,J),[[l]])]),o("div",K,[o("h2",O,e(t.product.title),1),o("div",Q,[o("span",X,e(t.product.platform),1),o("span",Y,e(t.product.category),1)]),o("div",Z,[o("div",$,[o("span",tt,e(s.$t("productDetail.price")),1),o("span",ot,e(t.product.formattedPrice),1)]),o("div",st,[o("span",et,e(s.$t("productDetail.sales")),1),o("span",at,e(t.product.sales.toLocaleString()),1)]),o("div",it,[o("span",ct,e(s.$t("productDetail.rating")),1),o("span",dt,e(t.product.rating)+"/5",1)]),o("div",nt,[o("span",rt,e(s.$t("productDetail.competitionLabel")),1),o("span",{class:S(["stat-value",`competition-${t.product.competition}`])},e(t.getCompetitionText(t.product.competition)),3)])]),o("div",lt,[o("button",{class:"btn btn-primary",onClick:c[1]||(c[1]=(...a)=>t.toggleWatch&&t.toggleWatch(...a))},e(t.isWatched?s.$t("productDetail.removeFromWatchlist"):s.$t("productDetail.addToWatchlist")),1),o("button",{class:"btn btn-secondary",disabled:t.isInCompare,onClick:c[2]||(c[2]=(...a)=>t.addToCompare&&t.addToCompare(...a))},e(t.isInCompare?s.$t("productDetail.removeFromCompare"):s.$t("productDetail.addToCompare")),9,pt)])])]),o("div",ut,[o("div",mt,[o("h3",_t,e(s.$t("productDetail.description")),1),o("p",ht,e(t.product.description||s.$t("productDetail.noDescription")),1)]),o("div",gt,[o("h3",vt,e(s.$t("productDetail.keywords")),1),o("div",ft,[(m(!0),u(F,null,P(t.product.tags||[],a=>(m(),u("div",{key:a,class:"keyword-tag"},[o("span",Ct,e(a),1),o("button",{class:"copy-btn",title:"å¤åˆ¶å…³é”®è¯",onClick:f=>t.copyToClipboard(a)}," ğŸ“‹ ",8,bt)]))),128))]),t.showCopyNotification?(m(),u("div",yt," å¤åˆ¶æˆåŠŸï¼ ")):b("",!0)])])])):b("",!0)]}),_:1},8,["loading","error","empty","empty-text"])])}const wt=w(j,[["render",Dt],["__scopeId","data-v-a674ed9f"]]);export{wt as default};
