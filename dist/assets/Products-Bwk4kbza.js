import{_ as S,c,e as b,l as d,a as e,t as n,F as g,r as C,n as H,x,I as J,j as y,o as $,J as m,D as Q,u as X,i as F,f as Y,h as D,K as f,m as B,v as Z,q as ee,w as U,k as te}from"./index-Jd6TsP0i.js";import{T as ae}from"./TriState-2fK6zj0G.js";const K={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},P=(i,o=!0)=>{const s=K==null?void 0:K[`VITE_FLAG_${i.toUpperCase()}`];return typeof s=="string"?s==="true":o},V={emptyWarmCard:P("empty_warm_card"),onboarding:P("onboarding"),reasonCard:P("reason_card")},se={name:"OnboardingSteps",emits:["next-step"],setup(i,{emit:o}){const{t:s}=x(),a=J(),u=y(()=>["search","compare","monitor"].map((v,R)=>({id:v,index:R+1,label:s(`onboarding.steps.${v}`),completed:a.isCompleted(v)}))),_=y(()=>a.currentStep()),r=y(()=>u.value.every(h=>h.completed)),k=y(()=>u.value.some(h=>h.completed)),I=y(()=>!a.dismissed);return $(()=>{u.value.filter(h=>!h.completed).forEach(h=>{m.track("onboarding_step_shown",{step:h.id})})}),{t:s,steps:u,nextStepId:_,handleNext:()=>{_.value&&(o("next-step",_.value),m.track("onboarding_step_next_click",{step:_.value}))},handleDismiss:()=>{a.dismiss()},handleReset:()=>{a.reset()},visible:I,allCompleted:r,hasProgress:k}}},oe={key:0,class:"onboarding-steps",role:"complementary","aria-label":"onboarding"},ne={class:"onboarding-steps__header"},ie={class:"onboarding-steps__title"},re={class:"onboarding-steps__actions"},le={class:"onboarding-steps__complete"},de={class:"onboarding-steps__footer"},ce={class:"onboarding-steps__list"},_e={class:"onboarding-steps__status","aria-hidden":"true"},me={key:0},ue={key:1},pe={class:"onboarding-steps__content"},he={class:"onboarding-steps__label"},ye={key:0,class:"onboarding-steps__hint"},fe={class:"onboarding-steps__footer"},ge=["disabled"];function be(i,o,s,a,u,_){return a.visible?(d(),c("aside",oe,[e("div",ne,[e("h2",ie,n(a.t("onboarding.title")),1),e("div",re,[a.hasProgress?(d(),c("button",{key:0,type:"button",class:"onboarding-steps__reset",onClick:o[0]||(o[0]=(...r)=>a.handleReset&&a.handleReset(...r))},n(a.t("onboarding.cta.reset")),1)):b("",!0),e("button",{type:"button",class:"onboarding-steps__dismiss",onClick:o[1]||(o[1]=(...r)=>a.handleDismiss&&a.handleDismiss(...r))},n(a.t("onboarding.cta.dismiss")),1)])]),a.allCompleted?(d(),c(g,{key:0},[e("div",le,n(a.t("onboarding.allDone")),1),e("div",de,[e("button",{type:"button",class:"btn btn-primary",onClick:o[2]||(o[2]=(...r)=>a.handleReset&&a.handleReset(...r))},n(a.t("onboarding.cta.reset")),1)])],64)):(d(),c(g,{key:1},[e("ol",ce,[(d(!0),c(g,null,C(a.steps,r=>(d(),c("li",{key:r.id,class:H(["onboarding-steps__item",{"is-completed":r.completed,"is-current":r.id===a.nextStepId}])},[e("div",_e,[r.completed?(d(),c("span",me,"âœ”")):(d(),c("span",ue,n(r.index),1))]),e("div",pe,[e("p",he,n(r.label),1),r.completed?(d(),c("p",ye,n(a.t("onboarding.done")),1)):b("",!0)])],2))),128))]),e("div",fe,[e("button",{type:"button",class:"btn btn-primary",disabled:!a.nextStepId,onClick:o[3]||(o[3]=(...r)=>a.handleNext&&a.handleNext(...r))},n(a.t("onboarding.cta.next")),9,ge)])],64))])):b("",!0)}const ke=S(se,[["render",be],["__scopeId","data-v-5a62f837"]]),ve={name:"EmptyWarmCard",props:{titleKey:{type:String,default:"empty.warm.title"},descKey:{type:String,default:"empty.warm.desc"},primaryKey:{type:String,default:"empty.warm.ctaPrimary"},secondaryKey:{type:String,default:"empty.warm.ctaSecondary"}},emits:["load-sample","view-guide"],setup(i,{emit:o}){const{t:s}=x();return $(()=>{m.track("empty_warm_shown")}),{t:s,handleLoadSample:()=>{m.track("empty_warm_load_sample_click"),o("load-sample")},handleViewGuide:()=>{m.track("empty_warm_view_guide_click"),o("view-guide")}}}},we={class:"empty-warm-card",role:"status","aria-live":"polite"},Ce={class:"empty-warm-card__title"},Se={class:"empty-warm-card__desc"},$e={class:"empty-warm-card__actions"};function Ie(i,o,s,a,u,_){return d(),c("section",we,[Q(i.$slots,"illustration",{},()=>[o[2]||(o[2]=e("svg",{class:"empty-warm-card__illustration",viewBox:"0 0 64 64","aria-hidden":"true"},[e("circle",{cx:"32",cy:"32",r:"30",fill:"rgba(59,130,246,0.08)",stroke:"rgba(59,130,246,0.3)","stroke-width":"2"}),e("path",{d:"M20 33h16l-5.2 5.2",stroke:"rgba(59,130,246,0.8)","stroke-width":"3",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"}),e("path",{d:"M32 20l9 9-9 9",stroke:"rgba(59,130,246,0.8)","stroke-width":"3",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"})],-1))]),e("h2",Ce,n(a.t(s.titleKey)),1),e("p",Se,n(a.t(s.descKey)),1),e("div",$e,[e("button",{type:"button",class:"btn btn-primary",onClick:o[0]||(o[0]=(...r)=>a.handleLoadSample&&a.handleLoadSample(...r))},n(a.t(s.primaryKey)),1),e("button",{type:"button",class:"btn btn-secondary",onClick:o[1]||(o[1]=(...r)=>a.handleViewGuide&&a.handleViewGuide(...r))},n(a.t(s.secondaryKey)),1)])])}const Re=S(ve,[["render",Ie],["__scopeId","data-v-93c1f085"]]),De=3;function Ke(i){const o=[];return!i||typeof i!="object"?o:(Array.isArray(i.reasons)&&i.reasons.length>0&&i.reasons.forEach(s=>{o.push({key:"recommendation.reasons.custom",values:{text:s}})}),typeof i.marginRate=="number"&&i.marginRate>=25&&o.push({key:"recommendation.reasons.highMargin",values:{value:i.marginRate.toFixed(1)}}),typeof i.competitionScore=="number"&&i.competitionScore<=35&&o.push({key:"recommendation.reasons.lowCompetition",values:{value:i.competitionScore}}),typeof i.stock=="number"&&i.stock>=50&&o.push({key:"recommendation.reasons.sufficientStock",values:{value:i.stock}}),Array.isArray(i.tags)&&i.tags.length>0&&o.push({key:"recommendation.reasons.tagHighlight",values:{tag:i.tags[0]}}),o.length===0&&o.push({key:"recommendation.reasons.default"}),o.slice(0,De))}const Pe={name:"ReasonCard",props:{product:{type:Object,required:!0}},emits:["view-details"],setup(i,{emit:o}){const{t:s}=x(),a=y(()=>Ke(i.product).map(_=>s(_.key,_.values||{})));return $(()=>{var _;m.track("reason_card_shown",{id:(_=i.product)==null?void 0:_.id})}),{t:s,translatedReasons:a,handleDetails:()=>{var r;const _=(r=i.product)==null?void 0:r.id;m.track("recommendation_reason_click_detail",{productId:_}),m.track("reason_card_view_details_click",{id:_}),o("view-details",i.product)}}}},Ve={class:"reason-card",role:"note","aria-live":"polite"},xe={class:"reason-card__header"},Ee={class:"reason-card__title"},We={class:"reason-card__list"},Le={class:"reason-card__footer"};function Ae(i,o,s,a,u,_){return d(),c("section",Ve,[e("header",xe,[e("h3",Ee,n(a.t("recommendation.title")),1)]),e("ul",We,[(d(!0),c(g,null,C(a.translatedReasons,(r,k)=>(d(),c("li",{key:k},n(r),1))),128))]),e("footer",Le,[e("button",{type:"button",class:"btn btn-link",onClick:o[0]||(o[0]=(...r)=>a.handleDetails&&a.handleDetails(...r))},n(a.t("recommendation.actions.details")),1)])])}const ze=S(Pe,[["render",Ae],["__scopeId","data-v-7e336062"]]),Me={class:"page products"},Oe={class:"page__header"},Te={class:"page__heading"},Ge={class:"page__subtitle text-muted"},Ne={class:"toolbar mt-3"},Fe={class:"sr-only",for:"products-search"},Be=["placeholder"],Ue={class:"sr-only",for:"products-platform"},je=["value"],qe={key:1,class:"empty-state"},He={class:"products-grid"},Je={class:"product-card__header"},Qe={class:"product-card__title"},Xe={class:"product-card__subtitle text-muted"},Ye={class:"product-card__status"},Ze={class:"product-card__body"},et={class:"product-card__media"},tt=["src"],at={key:1,class:"product-card__placeholder"},st={class:"product-card__meta"},ot={class:"meta-item"},nt={class:"meta-item"},it={class:"meta-item"},rt={class:"meta-item"},lt={key:0,class:"product-card__tags"},dt={class:"product-card__footer"},ct={class:"product-card__actions"},_t=["onClick"],mt=["disabled","onClick"],ut=["onClick"],pt={__name:"Products",setup(i){const o=te(),s=X(),a=F(""),u=F("all"),_=y(()=>{const t={platform:u.value==="all"?"":u.value};return typeof s.searchProducts=="function"?s.searchProducts(a.value,t)??[]:s.products??[]}),r=y(()=>{var t;return(((t=_.value)==null?void 0:t.length)??0)===0}),k=y(()=>V.emptyWarmCard&&!s.loading&&!s.error&&r.value),I=[{value:"all",labelKey:"products.filter.all"},{value:"amazon",labelKey:"settings.platforms.amazon"},{value:"shopee",labelKey:"settings.platforms.shopee"},{value:"lazada",labelKey:"settings.platforms.lazada"},{value:"ebay",labelKey:"settings.platforms.ebay"},{value:"aliexpress",labelKey:"settings.platforms.aliexpress"}];function E(){m.track("search_input",{area:"products",q:a.value})}function W(){m.track("filter_change",{area:"products",platform:u.value})}function L(){typeof s.loadSampleProducts=="function"&&(s.loadSampleProducts(),m.track("ui_click",{area:"products_empty",action:"load_samples"}))}function h(){console.info("[guide] open usage guide placeholder"),m.track("ui_click",{area:"products_empty",action:"view_guide"})}function v(t){console.info("[reason] details for",t==null?void 0:t.id),m.track("recommendation_reason_click_detail",{productId:t==null?void 0:t.id})}function R(t){var p;!(t!=null&&t.id)||typeof s.toggleWatch!="function"||(s.toggleWatch(t.id),m.track("ui_click",{area:"products_card",action:"toggle_watch",productId:t.id,watched:((p=s.isWatched)==null?void 0:p.call(s,t.id))??!1}))}function j(t){if(t!=null&&t.id&&!(typeof s.isInCompare=="function"&&s.isInCompare(t.id))&&typeof s.addToCompare=="function")try{s.addToCompare(t.id),m.track("ui_click",{area:"products_card",action:"add_compare",productId:t.id})}catch(p){console.warn("[compare] failed to add product",t.id,p)}}function q(t){t!=null&&t.id&&(m.track("ui_click",{area:"products_card",action:"view_detail",productId:t.id}),o.push({name:"ProductDetail",params:{id:t.id}}))}return $(async()=>{typeof s.initialize=="function"&&await s.initialize(),m.track("page_view",{page:"products"})}),(t,p)=>(d(),c("section",Me,[e("header",Oe,[e("div",Te,[e("h1",null,n(t.$t("products.title")||"å•†å“ç®¡ç†"),1),e("p",Ge,n(t.$t("products.subtitle")),1)]),f(V).onboarding?(d(),D(ke,{key:0,class:"page__onboarding"})):b("",!0)]),e("div",Ne,[e("label",Fe,n(t.$t("products.search.placeholder")),1),B(e("input",{id:"products-search","onUpdate:modelValue":p[0]||(p[0]=l=>a.value=l),class:"input",type:"search",placeholder:t.$t("products.search.placeholder")||"æœç´¢å•†å“","aria-label":"æœç´¢å•†å“",onInput:E},null,40,Be),[[Z,a.value]]),e("label",Ue,n(t.$t("products.filter.all")),1),B(e("select",{id:"products-platform","onUpdate:modelValue":p[1]||(p[1]=l=>u.value=l),class:"select ml-2","aria-label":"é€‰æ‹©å¹³å°",onChange:W},[(d(),c(g,null,C(I,l=>e("option",{key:l.value,value:l.value},n(t.$t(l.labelKey)),9,je)),64))],544),[[ee,u.value]])]),Y(ae,{class:"mt-4",loading:f(s).loading,error:f(s).error||"",empty:r.value,"empty-text":t.$t("products.empty")||""},{empty:U(()=>[k.value?(d(),D(Re,{key:0,onLoadSample:L,onViewGuide:h})):(d(),c("div",qe,n(t.$t("products.empty")||"æš‚æ— æ•°æ®"),1))]),default:U(()=>[e("div",He,[(d(!0),c(g,null,C(_.value,l=>{var A,z,M,O,T,G,N;return d(),c("article",{key:l.id,class:"product-card",role:"article","aria-label":"product"},[e("header",Je,[e("div",null,[e("h3",Qe,n(l.name),1),e("p",Xe,n(t.$t(`settings.platforms.${l.platform}`)||l.platform),1)]),e("span",Ye,n(t.$t(`products.status.${l.status}`)||l.status),1)]),e("div",Ze,[e("figure",et,[l.imageUrl?(d(),c("img",{key:0,src:l.imageUrl,alt:"",class:"product-card__image",loading:"lazy"},null,8,tt)):(d(),c("div",at,[...p[2]||(p[2]=[e("span",{"aria-hidden":"true"},"ðŸ“¦",-1)])]))]),e("dl",st,[e("div",ot,[e("dt",null,n(t.$t("products.price")),1),e("dd",null,n(l.formattedPrice??l.price),1)]),e("div",nt,[e("dt",null,n(t.$t("products.profitMargin")),1),e("dd",null,n(l.marginRate??"--")+"%",1)]),e("div",it,[e("dt",null,n(t.$t("products.stock")),1),e("dd",null,n(l.stock??0),1)]),e("div",rt,[e("dt",null,n(t.$t("compare.competitionLabel")),1),e("dd",null,n(l.competitionScore??"--"),1)])]),(A=l.tags)!=null&&A.length?(d(),c("ul",lt,[(d(!0),c(g,null,C(l.tags,w=>(d(),c("li",{key:w},n(w),1))),128))])):b("",!0)]),e("footer",dt,[e("div",ct,[e("button",{type:"button",class:"btn btn-secondary",onClick:w=>R(l)},n((M=(z=f(s)).isWatched)!=null&&M.call(z,l.id)?t.$t("watchlist.removeFromWatchlist"):t.$t("watchlist.addToWatchlist")),9,_t),e("button",{type:"button",class:"btn btn-secondary",disabled:(T=(O=f(s)).isInCompare)==null?void 0:T.call(O,l.id),onClick:w=>j(l)},n((N=(G=f(s)).isInCompare)!=null&&N.call(G,l.id)?t.$t("products.actions.compared"):t.$t("products.actions.compare")),9,mt),e("button",{type:"button",class:"btn btn-primary",onClick:w=>q(l)},n(t.$t("products.actions.analyze")),9,ut)]),f(V).reasonCard?(d(),D(ze,{key:0,product:l,class:"product-card__reason mt-2",onViewDetails:()=>v(l)},null,8,["product","onViewDetails"])):b("",!0)])])}),128))])]),_:1},8,["loading","error","empty","empty-text"])]))}},ft=S(pt,[["__scopeId","data-v-5a72a745"]]);export{ft as default};
