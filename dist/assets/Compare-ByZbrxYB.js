import{_ as g,c as i,a as t,e as p,t as a,F as n,r as d,n as u,b as v,h as y,g as b,u as C,C as P,l as c}from"./index-Jd6TsP0i.js";import{P as f}from"./ProductCard-B0q4MI7o.js";const w={name:"Compare",components:{ProductCard:f},setup(){const s=C(),r=P();return{productStore:s,settingsStore:r}},computed:{compareProducts(){return this.productStore.compareProducts||[]},suggestedProducts(){const s=this.productStore.products||[],r=this.compareProducts.map(l=>l.id);return s.filter(l=>!r.includes(l.id)).slice(0,3)},watchedProducts(){return this.productStore.watchedProducts||[]},priceAnalysis(){if(this.compareProducts.length===0)return{min:0,max:0,avg:0};const s=this.compareProducts.map(r=>r.price);return{min:Math.min(...s),max:Math.max(...s),avg:(s.reduce((r,l)=>r+l,0)/s.length).toFixed(2)}},salesAnalysis(){if(this.compareProducts.length===0)return{max:0,avg:0};const r=this.compareProducts.map(l=>l.reviewCount||0).filter(l=>l>0);return r.length===0?{max:0,avg:0}:{max:Math.max(...r),avg:Math.floor(r.reduce((l,m)=>l+m,0)/r.length)}},ratingAnalysis(){if(this.compareProducts.length===0)return{max:0,avg:0};const s=this.compareProducts.map(r=>r.rating||0).filter(r=>r>0);return s.length===0?{max:0,avg:0}:{max:Math.max(...s).toFixed(1),avg:(s.reduce((r,l)=>r+l,0)/s.length).toFixed(1)}}},async mounted(){this.productStore.isInitialized||await this.productStore.initialize()},methods:{getCompetitionText(s){return{low:this.$t("compare.competition.low"),medium:this.$t("compare.competition.medium"),high:this.$t("compare.competition.high")}[s]||s},getMarginLevel(s){return s?s>30?"high":s>=15?"medium":"low":"low"},viewDetails(s){this.$router.push(`/products/${s}`)},viewProduct(s){this.viewDetails(s)},addToCompare(s){this.productStore.addToCompare(s)},toggleWatch(s){this.productStore.toggleWatch(s)},removeFromCompare(s){this.productStore.removeFromCompare(s)},clearCompare(){this.productStore.clearCompare()},exportCompare(){alert(this.$t("common.developmentInProgress"))},goToSearch(){this.$router.push("/search")},goToDashboard(){this.$router.push("/")}}},S={class:"compare"},k={class:"page-header"},$={class:"page-title"},A={class:"page-subtitle"},T={key:0,class:"compare-content"},F={class:"compare-toolbar"},D={class:"toolbar-left"},M={class:"compare-count"},L={class:"toolbar-right"},N={class:"comparison-table"},W={class:"table"},V={class:"metric-column"},B={class:"product-header"},I=["src","alt"],z={class:"product-info"},R={class:"product-name"},E={class:"product-platform"},U=["title","onClick"],j={class:"metric-name"},q={class:"category-tag"},G={class:"compare-row"},H={class:"compare-label"},J={class:"compare-row"},K={class:"compare-label"},O={class:"compare-row"},Q={class:"compare-label"},X={class:"rating"},Y={class:"rating-value"},Z={key:0,class:"rating-stars"},x={class:"compare-row"},tt={class:"compare-row"},st={class:"compare-row"},et={class:"compare-label"},at={class:"compare-row actions-row"},ot={class:"compare-label"},rt={class:"product-actions"},ct=["onClick"],it=["onClick"],lt={class:"analysis-section"},nt={class:"section-title"},dt={class:"analysis-grid"},mt={class:"analysis-card"},ht={class:"analysis-title"},pt={class:"analysis-content"},ut={class:"price-stats"},_t={class:"stat-item"},gt={class:"stat-label"},vt={class:"stat-value"},yt={class:"stat-item"},bt={class:"stat-label"},Ct={class:"stat-value"},Pt={class:"stat-item"},ft={class:"stat-label"},wt={class:"stat-value"},St={class:"analysis-card"},kt={class:"analysis-title"},$t={class:"analysis-content"},At={class:"sales-stats"},Tt={class:"stat-item"},Ft={class:"stat-label"},Dt={class:"stat-value"},Mt={class:"stat-item"},Lt={class:"stat-label"},Nt={class:"stat-value"},Wt={class:"analysis-card"},Vt={class:"analysis-title"},Bt={class:"analysis-content"},It={class:"rating-stats"},zt={class:"stat-item"},Rt={class:"stat-label"},Et={class:"stat-value"},Ut={class:"stat-item"},jt={class:"stat-label"},qt={class:"stat-value"},Gt={key:1,class:"empty-state"},Ht={class:"empty-title"},Jt={class:"empty-description"},Kt={key:2,class:"compare-suggestions"},Ot={class:"suggested-products"};function Qt(s,r,l,m,Xt,o){const _=b("ProductCard");return c(),i("div",S,[t("div",k,[t("h1",$,a(s.$t("compare.title")),1),t("p",A,a(s.$t("compare.subtitle")),1)]),o.compareProducts.length>0?(c(),i("div",T,[t("div",F,[t("div",D,[t("span",M,a(s.$t("compare.selectedCount",{count:o.compareProducts.length})),1)]),t("div",L,[t("button",{class:"btn btn-secondary",onClick:r[0]||(r[0]=(...e)=>o.clearCompare&&o.clearCompare(...e))},a(s.$t("compare.clearAll")),1),t("button",{class:"btn btn-primary",onClick:r[1]||(r[1]=(...e)=>o.exportCompare&&o.exportCompare(...e))},a(s.$t("compare.export")),1)])]),t("div",N,[t("table",W,[t("thead",null,[t("tr",null,[t("th",V,a(s.$t("compare.features")),1),(c(!0),i(n,null,d(o.compareProducts,e=>(c(),i("th",{key:e.id,class:"product-column"},[t("div",B,[t("img",{src:e.imageUrl||`https://via.placeholder.com/200x200?text=${s.$t("common.product")}`,alt:e.title,class:"product-thumb"},null,8,I),t("div",z,[t("h4",R,a(e.title),1),t("span",E,a(e.platform),1)]),t("button",{class:"btn btn-ghost btn-sm remove-btn",title:s.$t("compare.remove"),onClick:h=>o.removeFromCompare(e.id)}," Ã— ",8,U)])]))),128))])]),t("tbody",null,[t("tr",null,[t("td",j,a(s.$t("compare.category")),1),(c(!0),i(n,null,d(o.compareProducts,e=>(c(),i("td",{key:`category-${e.id}`},[t("span",q,a(e.category),1)]))),128))]),t("tr",G,[t("td",H,a(s.$t("compare.price")),1),(c(!0),i(n,null,d(o.compareProducts,e=>(c(),i("td",{key:`price-${e.id}`,class:"compare-value price"},a(e.formattedPrice),1))),128))]),t("tr",J,[t("td",K,a(s.$t("compare.sales")),1),(c(!0),i(n,null,d(o.compareProducts,e=>(c(),i("td",{key:`sales-${e.id}`,class:"compare-value"},a(e.reviewCount?e.reviewCount.toLocaleString():"N/A"),1))),128))]),t("tr",O,[t("td",Q,a(s.$t("compare.rating")),1),(c(!0),i(n,null,d(o.compareProducts,e=>(c(),i("td",{key:`rating-${e.id}`,class:"compare-value"},[t("div",X,[t("span",Y,a(e.rating?e.rating.toFixed(1):"N/A"),1),e.rating?(c(),i("span",Z,a("â˜…".repeat(Math.floor(e.rating)))+a("â˜†".repeat(5-Math.floor(e.rating))),1)):p("",!0)])]))),128))]),t("tr",x,[r[3]||(r[3]=t("td",{class:"compare-label"}," Profit Margin ",-1)),(c(!0),i(n,null,d(o.compareProducts,e=>(c(),i("td",{key:`margin-${e.id}`,class:"compare-value"},[t("span",{class:u(`margin-badge margin-${o.getMarginLevel(e.marginRate)}`)},a(e.marginRate?`${e.marginRate.toFixed(1)}%`:"N/A"),3)]))),128))]),t("tr",tt,[r[4]||(r[4]=t("td",{class:"compare-label"}," Competition Score ",-1)),(c(!0),i(n,null,d(o.compareProducts,e=>(c(),i("td",{key:`score-${e.id}`,class:"compare-value"},a(e.competitionScore?e.competitionScore.toFixed(1):"N/A"),1))),128))]),t("tr",st,[t("td",et,a(s.$t("compare.competitionLabel")),1),(c(!0),i(n,null,d(o.compareProducts,e=>(c(),i("td",{key:`competition-${e.id}`,class:"compare-value"},[t("span",{class:u(`competition-badge competition-${e.competitionLevel}`)},a(o.getCompetitionText(e.competitionLevel)),3)]))),128))]),t("tr",at,[t("td",ot,a(s.$t("compare.actions")),1),(c(!0),i(n,null,d(o.compareProducts,e=>(c(),i("td",{key:`actions-${e.id}`,class:"compare-value"},[t("div",rt,[t("button",{class:"btn btn-primary btn-sm",onClick:h=>o.viewDetails(e.id)},a(s.$t("compare.viewDetails")),9,ct),t("button",{class:"btn btn-secondary btn-sm",onClick:h=>o.toggleWatch(e.id)},a(m.productStore.isWatched(e.id)?s.$t("watchlist.removeFromWatchlist"):s.$t("watchlist.addToWatchlist")),9,it)])]))),128))])])])]),t("div",lt,[t("h2",nt," ðŸ“Š "+a(s.$t("compare.analysis")),1),t("div",dt,[t("div",mt,[t("h3",ht,a(s.$t("compare.priceAnalysis")),1),t("div",pt,[t("div",ut,[t("div",_t,[t("span",gt,a(s.$t("compare.lowestPrice")),1),t("span",vt,a(m.settingsStore.formatCurrency(o.priceAnalysis.min)),1)]),t("div",yt,[t("span",bt,a(s.$t("compare.highestPrice")),1),t("span",Ct,a(m.settingsStore.formatCurrency(o.priceAnalysis.max)),1)]),t("div",Pt,[t("span",ft,a(s.$t("compare.averagePrice")),1),t("span",wt,a(m.settingsStore.formatCurrency(Number(o.priceAnalysis.avg))),1)])])])]),t("div",St,[t("h3",kt,a(s.$t("compare.salesAnalysis")),1),t("div",$t,[t("div",At,[t("div",Tt,[t("span",Ft,a(s.$t("compare.highestSales")),1),t("span",Dt,a(o.salesAnalysis.max.toLocaleString()),1)]),t("div",Mt,[t("span",Lt,a(s.$t("compare.averageSales")),1),t("span",Nt,a(o.salesAnalysis.avg.toLocaleString()),1)])])])]),t("div",Wt,[t("h3",Vt,a(s.$t("compare.ratingAnalysis")),1),t("div",Bt,[t("div",It,[t("div",zt,[t("span",Rt,a(s.$t("compare.highestRating")),1),t("span",Et,a(o.ratingAnalysis.max),1)]),t("div",Ut,[t("span",jt,a(s.$t("compare.averageRating")),1),t("span",qt,a(o.ratingAnalysis.avg),1)])])])])])])])):(c(),i("div",Gt,[r[6]||(r[6]=t("div",{class:"empty-icon"}," ðŸ“Š ",-1)),t("h3",Ht,a(s.$t("compare.emptyState.title")),1),t("p",Jt,a(s.$t("compare.emptyState.description")),1),t("button",{class:"btn btn-primary empty-action-btn",onClick:r[2]||(r[2]=(...e)=>o.goToDashboard&&o.goToDashboard(...e))},[r[5]||(r[5]=t("span",{class:"btn-icon"},"ðŸ”",-1)),v(" "+a(s.$t("compare.emptyState.cta")),1)])])),o.compareProducts.length>0&&o.compareProducts.length<4?(c(),i("div",Kt,[t("h3",null,a(s.$t("compare.suggestions")),1),t("p",null,a(s.$t("compare.suggestionsDesc")),1),t("div",Ot,[(c(!0),i(n,null,d(o.suggestedProducts,e=>(c(),y(_,{key:e.id,product:e,"is-watched":o.watchedProducts.some(h=>h.id===e.id),"is-in-compare":!1,onViewDetails:o.viewProduct,onAddToCompare:o.addToCompare},null,8,["product","is-watched","onViewDetails","onAddToCompare"]))),128))])])):p("",!0)])}const xt=g(w,[["render",Qt],["__scopeId","data-v-249f7f51"]]);export{xt as default};
