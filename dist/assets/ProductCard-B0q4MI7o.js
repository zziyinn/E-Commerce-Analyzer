import{_ as U,C as L,x as M,j as b,c as s,a as n,m as x,p as B,s as _,n as g,t as i,b as p,e as f,B as D,l as u}from"./index-Jd6TsP0i.js";const A={name:"ProductCard",props:{product:{type:Object,required:!0},isWatched:{type:Boolean,default:!1},isInCompare:{type:Boolean,default:!1}},emits:["view-details","add-to-compare","add-to-watch"],setup(r){const a=L(),{t:e}=M(),o=b(()=>{const t=e("common.product");return`https://via.placeholder.com/200x200?text=${encodeURIComponent(t)}`});function h(t){return a.formatCurrency(t)}function C(t){return t!=null&&t.formattedMarginRate?t.formattedMarginRate:typeof(t==null?void 0:t.marginRate)=="number"?`${t.marginRate}%`:"--"}function m(t){return!t||typeof t.marginRate!="number"?"":t.marginRate>30?"margin-high":t.marginRate>=15?"margin-medium":"margin-low"}function l(t){return!t||typeof t.marginRate!="number"?"":t.marginRate>30?"Bestseller Potential":t.marginRate>=15?"Good Potential":""}function R(t){return!t||typeof t.marginRate!="number"?"":t.marginRate>30?"ðŸ”¥":""}function w(t){switch(t){case"low":return"competition-low";case"medium":return"competition-medium";case"high":return"competition-high";default:return""}}function k(t){return{low:e("productDetail.competition.low"),medium:e("productDetail.competition.medium"),high:e("productDetail.competition.high")}[t]||e("common.none")}function v(t){switch(t){case"low":return"Blue Ocean";case"medium":return"Competitive";case"high":return"Red Ocean";default:return""}}const I=b(()=>{const t=r.product;return!!(t.productUrl||t.url||t.product_url)}),P=()=>{const t=r.product,c=t.productUrl||t.url||t.product_url||null;if(c){const d=String(c).trim();return d&&!d.startsWith("http")?(console.warn("[ProductCard] Invalid URL format:",d),null):d}return null};function y(t){t==null||t.stopPropagation();const c=P();if(console.log("[ProductCard] Image clicked, product:",r.product),console.log("[ProductCard] All product keys:",Object.keys(r.product)),console.log("[ProductCard] URL fields:",{productUrl:r.product.productUrl,url:r.product.url,product_url:r.product.product_url}),console.log("[ProductCard] Final URL:",c),c)window.open(c,"_blank","noopener,noreferrer");else{console.warn("[ProductCard] No product URL found for product:",r.product.id);const d=`https://www.amazon.com/s?k=${encodeURIComponent(r.product.title||r.product.name||"")}`;console.log("[ProductCard] Opening Amazon search instead:",d),window.open(d,"_blank","noopener,noreferrer")}}return{placeholderImage:o,formatPrice:h,formatMarginRate:C,getMarginRateClass:m,getMarginRateLabel:l,getMarginRateIcon:R,getCompetitionClass:w,getCompetitionText:k,getCompetitionLabel:v,hasProductUrl:I,handleImageClick:y}}},O={class:"product-card"},S={class:"card-header"},W=["src","alt","aria-label"],z={class:"card-title"},N={class:"card-body"},V={class:"info-row"},j={class:"value"},T={class:"info-row"},K={key:0,class:"margin-label"},q={key:1,class:"margin-icon"},E={class:"info-row"},F={key:0,class:"competition-label"},G={class:"card-footer"},H=["disabled"],J=["disabled"];function Q(r,a,e,o,h,C){const m=D("img-fallback");return u(),s("div",O,[n("div",S,[x(n("img",{src:e.product.imageUrl||o.placeholderImage,alt:e.product.title,class:g(["card-image",{clickable:o.hasProductUrl}]),onClick:a[0]||(a[0]=_((...l)=>o.handleImageClick&&o.handleImageClick(...l),["stop"])),onKeyup:a[1]||(a[1]=B(_((...l)=>o.handleImageClick&&o.handleImageClick(...l),["stop"]),["enter"])),tabindex:"0",role:"button","aria-label":`View ${e.product.title} on Amazon`},null,42,W),[[m]]),n("div",z,i(e.product.title),1)]),n("div",N,[n("div",V,[a[4]||(a[4]=n("span",{class:"label"},"Price",-1)),n("span",j,i(o.formatPrice(e.product.price)),1)]),n("div",T,[a[5]||(a[5]=n("span",{class:"label"},"Profit Margin",-1)),n("span",{class:g(["value",o.getMarginRateClass(e.product)])},[p(i(o.formatMarginRate(e.product))+" ",1),o.getMarginRateLabel(e.product)?(u(),s("span",K,i(o.getMarginRateLabel(e.product)),1)):f("",!0),o.getMarginRateIcon(e.product)?(u(),s("span",q,i(o.getMarginRateIcon(e.product)),1)):f("",!0)],2)]),n("div",E,[a[6]||(a[6]=n("span",{class:"label"},"Competition",-1)),n("span",{class:g(["value",o.getCompetitionClass(e.product.competitionLevel)])},[p(i(o.getCompetitionText(e.product.competitionLevel))+" ",1),o.getCompetitionLabel(e.product.competitionLevel)?(u(),s("span",F,i(o.getCompetitionLabel(e.product.competitionLevel)),1)):f("",!0)],2)])]),n("div",G,[n("button",{class:"btn btn-secondary",disabled:e.isInCompare,onClick:a[2]||(a[2]=l=>r.$emit("add-to-compare",e.product.id))},i(e.isInCompare?"In Compare":"Add to Compare"),9,H),n("button",{class:"btn btn-primary",disabled:e.isWatched,onClick:a[3]||(a[3]=l=>r.$emit("add-to-watch",e.product.id))},i(e.isWatched?"Unwatch":"Add to Watchlist"),9,J)])])}const Y=U(A,[["render",Q],["__scopeId","data-v-72203aa6"]]);export{Y as P};
