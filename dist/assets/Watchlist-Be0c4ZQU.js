import{_ as F,c as m,a as t,t as o,m as S,q as B,F as N,r as z,f as y,g as C,n as E,w as W,b as O,u as q,x as H,i as k,j as v,o as J,k as G,l as g}from"./index-Jd6TsP0i.js";import{P as K}from"./ProductCard-B0q4MI7o.js";import{D as Q}from"./DataTable-Ctq5dUfC.js";const X={name:"Watchlist",components:{ProductCard:K,DataTable:Q},setup(){const i=G(),a=q(),{t:n}=H(),e=k("grid"),u=k("all"),b=k("added"),c=v(()=>a.watchedProducts),_=v(()=>({total:c.value.length,highPerformance:c.value.filter(s=>s.sales>1e4&&s.rating>=4.5).length,needsAttention:c.value.filter(s=>s.competition==="high"||s.rating<4).length})),p=v(()=>c.value.filter(s=>s.sales>1e4&&s.rating>=4.5).length),l=v(()=>c.value.filter(s=>s.competition==="high"||s.rating<4).length),w=v(()=>{let s=[...c.value];switch(u.value){case"high-sales":s=s.filter(r=>r.sales>5e3);break;case"low-competition":s=s.filter(r=>r.competition==="low");break;case"price-drop":s=s.filter(()=>Math.random()>.7);break}switch(b.value){case"sales":s.sort((r,d)=>d.sales-r.sales);break;case"price":s.sort((r,d)=>r.price-d.price);break;case"rating":s.sort((r,d)=>d.rating-r.rating);break}return s}),D=v(()=>[{key:"title",label:n("watchlist.productName"),sortable:!0},{key:"platform",label:n("watchlist.platform"),sortable:!0},{key:"price",label:n("watchlist.price"),sortable:!0},{key:"sales",label:n("watchlist.sales"),sortable:!0},{key:"rating",label:n("watchlist.rating"),sortable:!0},{key:"competition",label:n("watchlist.competition"),sortable:!0},{key:"actions",label:n("watchlist.actions"),sortable:!1}]),T=s=>s.sales>1e4&&s.rating>=4.5?"status-good":s.competition==="high"||s.rating<4?"status-warning":"status-normal",V=s=>s.sales>1e4&&s.rating>=4.5?n("watchlist.status.good"):s.competition==="high"?n("watchlist.status.competitionHigh"):s.rating<4?n("watchlist.status.ratingLow"):n("watchlist.status.normal"),I=()=>{e.value=e.value==="grid"?"list":"grid"},P=s=>a.isInCompare(s),R=s=>{P(s)||a.addToCompare(s)},L=s=>{a.toggleWatch(s)},M=s=>{i.push(`/products/${s}`)},U=s=>{b.value=s},j=()=>{const s=c.value.map(h=>({title:h.title,platform:h.platform,category:h.category,price:h.price,sales:h.sales,rating:h.rating,competition:h.competition,url:h.url})),r=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),d=URL.createObjectURL(r),f=document.createElement("a");f.href=d,f.download="watchlist.json",f.click(),URL.revokeObjectURL(d)},A=()=>{confirm(n("watchlist.clearConfirm"))&&c.value.forEach(s=>{a.toggleWatch(s.id)})};return J(async()=>{a.isInitialized||await a.initialize()}),{viewMode:e,filterBy:u,sortBy:b,watchedProducts:c,stats:_,highPerformanceCount:p,alertCount:l,filteredProducts:w,tableColumns:D,getStatusClass:T,getStatusText:V,toggleView:I,isInCompare:P,addToCompare:R,removeFromWatch:L,viewProductDetails:M,handleSort:U,exportWatchlist:j,clearWatchlist:A}}},Y={class:"watchlist"},Z={class:"page-header"},$={class:"page-title"},x={class:"page-subtitle"},tt={class:"stats-grid"},st={class:"stat-card"},et={class:"stat-content"},at={class:"stat-value"},ot={class:"stat-label"},it={class:"stat-card highlight"},lt={class:"stat-content"},nt={class:"stat-value"},ct={class:"stat-label"},rt={class:"stat-card alert"},dt={class:"stat-content"},ht={class:"stat-value"},mt={class:"stat-label"},gt={key:0,class:"watchlist-content"},vt={class:"watchlist-controls"},wt={class:"controls-left"},bt={value:"all"},ut={value:"high-sales"},_t={value:"low-competition"},pt={value:"price-drop"},ft={value:"added"},yt={value:"sales"},Ct={value:"price"},kt={value:"rating"},Pt={class:"controls-right"},St=["disabled"],Bt={class:"watchlist-products"},Wt={key:0,class:"products-grid"},Dt={class:"watch-info"},Tt={class:"watch-status"},Vt={class:"status-text"},It={class:"watch-actions"},Rt=["disabled","onClick"],Lt={key:1,class:"products-table"},Mt={class:"table-actions"},Ut=["onClick"],jt=["disabled","onClick"],At=["onClick"],Ft={key:1,class:"empty-watchlist"},Nt={class:"empty-title"},zt={class:"empty-text"};function Et(i,a,n,e,u,b){const c=C("ProductCard"),_=C("DataTable"),p=C("router-link");return g(),m("div",Y,[t("div",Z,[t("h1",$,o(i.$t("watchlist.title")),1),t("p",x,o(i.$t("watchlist.subtitle")),1)]),t("div",tt,[t("div",st,[a[5]||(a[5]=t("div",{class:"stat-icon"}," ðŸ“Š ",-1)),t("div",et,[t("div",at,o(e.stats.total),1),t("div",ot,o(i.$t("watchlist.monitoredProducts")),1)])]),t("div",it,[a[6]||(a[6]=t("div",{class:"stat-icon"}," ðŸš€ ",-1)),t("div",lt,[t("div",nt,o(e.stats.highPerformance),1),t("div",ct,o(i.$t("watchlist.highPerformance")),1)])]),t("div",rt,[a[7]||(a[7]=t("div",{class:"stat-icon"}," âš ï¸ ",-1)),t("div",dt,[t("div",ht,o(e.stats.needsAttention),1),t("div",mt,o(i.$t("watchlist.needsAttention")),1)])])]),e.watchedProducts.length>0?(g(),m("div",gt,[t("div",vt,[t("div",wt,[S(t("select",{"onUpdate:modelValue":a[0]||(a[0]=l=>e.filterBy=l),class:"form-select"},[t("option",bt,o(i.$t("watchlist.allProducts")),1),t("option",ut,o(i.$t("watchlist.highSales")),1),t("option",_t,o(i.$t("watchlist.lowCompetition")),1),t("option",pt,o(i.$t("watchlist.priceDecreased")),1)],512),[[B,e.filterBy]]),S(t("select",{"onUpdate:modelValue":a[1]||(a[1]=l=>e.sortBy=l),class:"form-select"},[t("option",ft,o(i.$t("watchlist.sortByDateAdded")),1),t("option",yt,o(i.$t("watchlist.sortBySales")),1),t("option",Ct,o(i.$t("watchlist.sortByPrice")),1),t("option",kt,o(i.$t("watchlist.sortByRating")),1)],512),[[B,e.sortBy]])]),t("div",Pt,[t("button",{class:"btn btn-ghost view-toggle",onClick:a[2]||(a[2]=(...l)=>e.toggleView&&e.toggleView(...l))},o(e.viewMode==="grid"?"ðŸ“‹":"âŠž"),1),t("button",{class:"btn btn-secondary",onClick:a[3]||(a[3]=(...l)=>e.exportWatchlist&&e.exportWatchlist(...l))},o(i.$t("watchlist.export")),1),t("button",{class:"btn btn-danger",disabled:e.watchedProducts.length===0,onClick:a[4]||(a[4]=(...l)=>e.clearWatchlist&&e.clearWatchlist(...l))},o(i.$t("watchlist.clearAll")),9,St)])]),t("div",Bt,[e.viewMode==="grid"?(g(),m("div",Wt,[(g(!0),m(N,null,z(e.filteredProducts,l=>(g(),m("div",{key:l.id,class:"watch-card"},[y(c,{product:l,"is-watched":!0,onViewDetails:e.viewProductDetails,onToggleWatch:e.removeFromWatch},null,8,["product","onViewDetails","onToggleWatch"]),t("div",Dt,[t("div",Tt,[t("span",{class:E(["status-indicator",e.getStatusClass(l)])},null,2),t("span",Vt,o(e.getStatusText(l)),1)]),t("div",It,[t("button",{class:"btn btn-ghost btn-sm",disabled:e.isInCompare(l.id),onClick:w=>e.addToCompare(l.id)},o(e.isInCompare(l.id)?i.$t("watchlist.alreadyInCompare"):i.$t("watchlist.addToCompare")),9,Rt)])])]))),128))])):(g(),m("div",Lt,[y(_,{title:"",columns:e.tableColumns,data:e.filteredProducts,"empty-text":i.$t("watchlist.noProducts"),onRowClick:e.viewProductDetails,onSortChange:e.handleSort},{actions:W(({item:l})=>[t("div",Mt,[t("button",{class:"btn btn-ghost btn-sm",onClick:w=>e.viewProductDetails(l.id)},o(i.$t("common.view")),9,Ut),t("button",{class:"btn btn-secondary btn-sm",disabled:e.isInCompare(l.id),onClick:w=>e.addToCompare(l.id)},o(i.$t("common.compare")),9,jt),t("button",{class:"btn btn-danger btn-sm",onClick:w=>e.removeFromWatch(l.id)},o(i.$t("common.remove")),9,At)])]),_:1},8,["columns","data","empty-text","onRowClick","onSortChange"])]))])])):(g(),m("div",Ft,[a[9]||(a[9]=t("div",{class:"empty-icon"}," ðŸ‘ï¸ ",-1)),t("div",Nt,o(i.$t("watchlist.emptyState.title")),1),t("div",zt,o(i.$t("watchlist.emptyState.description")),1),y(p,{to:"/search",class:"btn btn-primary empty-action-btn"},{default:W(()=>[a[8]||(a[8]=t("span",{class:"btn-icon"},"+",-1)),O(" "+o(i.$t("watchlist.emptyState.actionButton")),1)]),_:1})]))])}const Jt=F(X,[["render",Et],["__scopeId","data-v-9dec159e"]]);export{Jt as default};
